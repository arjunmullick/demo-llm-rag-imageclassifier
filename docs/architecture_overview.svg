<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="520" viewBox="0 0 1000 520">
  <style>
    .box { fill:#ffffff; stroke:#333; stroke-width:1.5; rx:8; }
    .title { font: 700 16px/1.2 system-ui, sans-serif; fill:#111; }
    .text { font: 13px/1.4 system-ui, sans-serif; fill:#333; }
    .group { fill:#f7f7fb; stroke:#999; stroke-width:1.2; rx:10; }
    .arrow { stroke:#333; stroke-width:1.5; marker-end:url(#arrowHead); fill:none; }
  </style>
  <defs>
    <marker id="arrowHead" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#333"/>
    </marker>
  </defs>

  <!-- Browser UI -->
  <rect class="group" x="40" y="40" width="260" height="180"/>
  <text class="title" x="60" y="70">Browser UI</text>
  <rect class="box" x="60" y="90" width="220" height="110"/>
  <text class="text" x="75" y="115">- static/index.html</text>
  <text class="text" x="75" y="135">- Build Index</text>
  <text class="text" x="75" y="155">- Ask (Stream)</text>
  <text class="text" x="75" y="175">- Image Classifier</text>

  <!-- FastAPI Server -->
  <rect class="group" x="340" y="20" width="360" height="480"/>
  <text class="title" x="360" y="50">FastAPI Server</text>
  <rect class="box" x="360" y="70" width="320" height="100"/>
  <text class="text" x="375" y="95">Endpoints</text>
  <text class="text" x="395" y="115">- POST /ingest</text>
  <text class="text" x="395" y="135">- POST /chat, GET /chat/stream</text>
  <text class="text" x="395" y="155">- POST /classify_image</text>

  <rect class="box" x="360" y="190" width="320" height="130"/>
  <text class="text" x="375" y="210">RAG Pipeline (app/rag.py)</text>
  <text class="text" x="395" y="230">- chunk → embed → retrieve</text>
  <text class="text" x="395" y="250">- prompt build (context‑only)</text>
  <text class="text" x="395" y="270">- session history (in‑memory)</text>

  <rect class="box" x="360" y="340" width="320" height="120"/>
  <text class="text" x="375" y="365">Vector Store (app/vectorstore.py)</text>
  <text class="text" x="395" y="385">- JSON file: data/index.json</text>
  <text class="text" x="395" y="405">- cosine similarity search</text>

  <!-- OpenAI APIs -->
  <rect class="group" x="740" y="40" width="220" height="180"/>
  <text class="title" x="760" y="70">OpenAI APIs</text>
  <rect class="box" x="760" y="90" width="180" height="110"/>
  <text class="text" x="775" y="115">Embeddings</text>
  <text class="text" x="775" y="135">Chat (Text)</text>
  <text class="text" x="775" y="155">Chat (Vision)</text>

  <!-- Arrows -->
  <path class="arrow" d="M 300 130 L 360 130"/>
  <text class="text" x="305" y="120">/ingest, /chat, /classify_image</text>

  <path class="arrow" d="M 520 300 L 520 340"/>
  <text class="text" x="430" y="325">save/retrieve</text>

  <path class="arrow" d="M 680 230 L 740 150"/>
  <text class="text" x="695" y="200">embeds/chat</text>

  <!-- Legend -->
  <text class="text" x="40" y="250">Legend: UI → FastAPI → RAG/VectorStore → OpenAI APIs</text>
</svg>

